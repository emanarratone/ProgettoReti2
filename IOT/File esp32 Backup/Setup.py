import ujsonfrom Casello import Casellofrom Corsia import Corsiaclass Setup:    def __init__(self, gestore, targa):        self.gestore = gestore        self.targa_veicolo = targa        self.dispositivi_attivi = {}    def _pulisci_dati(self, dati_raw):        if dati_raw is None: return None        if isinstance(dati_raw, dict): return dati_raw        try: return ujson.loads(dati_raw)        except: return None    def ottieni_configurazione_completa(self, id_casello, num_corsia):        """Metodo centralizzato per scaricare tutto il necessario dal DB"""        print(f"\nðŸ“¡ Recupero dati per Casello {id_casello}, Corsia {num_corsia}...")        # 1. Veicolo        res_v = self.gestore.richiedi("veicolo/richiesta",                                      {"comando": "GET_AUTO", "targa": self.targa_veicolo},                                      f"veicolo/{self.targa_veicolo}/risposta")        # 2. Casello        res_cas = self.gestore.richiedi("casello/richiesta",                                        {"comando": "GET_CASELLO", "id_casello": id_casello},                                        f"casello/risposta/{id_casello}")        # 3. Corsia        res_cor = self.gestore.richiedi("casello/richiesta",                                        {"comando": "GET_CORSIA", "id_casello": id_casello, "num_corsia": num_corsia},                                        f"casello/{id_casello}/corsia/{num_corsia}/risposta")        return self._pulisci_dati(res_v), self._pulisci_dati(res_cas), self._pulisci_dati(res_cor)